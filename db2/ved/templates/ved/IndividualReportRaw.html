{% extends 'main/base.html' %}
{% load cache %}

{% comment %}
TODO: 

{% endcomment %}


{% block title %}
ВЭД :: Конкуренты :: Индивидуальный анализ :: Просмотр (подробный)
{% endblock title %}

{% block content %}

{% cache 300 IndividualReportRaw request.get_full_path %}
    {{ gtd }}<br>
    {{ edrpou_num | cut:' ' }}
    {{ records.count }}
        <table class="table table-striped border border-secondary">
        <thead>
        <!-- 'record__sender__name','record__sender__country__name','record__date','product_code','trademark__name','description','cost_fact' -->
            <tr>
                <th>№</th>
                <th>Дата</th>
                <th>Экспортер</th>
                <th>Страна</th>
                <th>Торговая марка</th>
                <th>Код товара</th>
                <th>Описание</th>
                <th>Стоимость, $</th>
            </tr>
        </thead>
        <tbody>
            {% for r in records %}
            <tr>
                <td scope="row">
                    {{ forloop.counter0|add:records.start_index }} 
                </td>
                <td>
                    {{ r.record__date | date:"d-b-y" |wordwrap:50 }}
                </td>
                <td>
                    {{ r.record__sender__name}}                    
                </td>
                <td>
                    {{ r.record__sender__country__name}}
                </td>
                <td>
                    {{ r.trademark__name}}
                </td>
                <td>
                    {{ r.product_code| cut:' '  }}
                </td>
                <td>
                    {{ r.description |wordwrap:150}}
                </td>
                <td>
                    {{ r.cost_fact }}
                </td>
            </tr>
            {% endfor %}
         </tbody>
    </table>
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            {% if records.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page=1">&laquo;</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ records.previous_page_number }}"> < </a>
                </li>
            {% endif %}

            <li class="page-item">
                <a class="page-link disabled" href="#"> Page {{ records.number }} of {{ records.paginator.num_pages }}</a>
            </li>

            {% if records.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ records.next_page_number }}"> > </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ records.paginator.num_pages }}"> &raquo; </a>
                </li>
            {% endif %}
        </ul>
    </nav>  
{% include 'ved/periods.html' %}
{% endcache %}
{% endblock %}